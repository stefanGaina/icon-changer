#!/bin/bash

set -e

FILES=$(git diff --cached --name-only --diff-filter=ACM | grep '^src/.*\.\(cpp\|hpp\)$' || true)

if [ -z "$FILES" ]; then
	exit 0
fi

for file in $FILES; do
	echo "Formatting $file"
	clang-format -i "$file"
	git add "$file"
done

exit 0
